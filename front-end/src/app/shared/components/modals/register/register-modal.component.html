<div class="glass-panel relative overflow-hidden px-8 py-8">
  <button
    type="button"
    class="absolute right-4 top-4 rounded-full border border-white/10 bg-white/10 p-2 text-slate-300 transition hover:text-white"
    (click)="close.emit()"
    aria-label="Chiudi"
  >
    ✕
  </button>

  <div class="space-y-6">

    <!-- HEADER -->
    <header class="space-y-2">
      <h2 class="text-2xl font-semibold text-white">
        <!-- Cambia dinamicamente -->
        {{ mode === 'form' ? 'Crea il tuo account' : 'Verifica la tua email' }}
      </h2>

      <p class="text-sm text-slate-300">
        <ng-container *ngIf="mode === 'form'">
          Registrati per accedere alla chat realtime, gestire gli amici e ricevere notifiche istantanee.
        </ng-container>

        <ng-container *ngIf="mode === 'verify'">
          Abbiamo inviato una mail di verifica a <strong>{{ email }}</strong>.  
          Clicca sul link che trovi nella tua casella per attivare l’account.
        </ng-container>
      </p>
    </header>

    <!-- FORM REGISTRAZIONE -->
    <form *ngIf="mode === 'form'" class="space-y-4" [formGroup]="form" (ngSubmit)="submit()">

      <label class="block text-sm font-medium text-slate-200">
        <span class="mb-2 block text-xs uppercase tracking-wide text-slate-400">Username</span>
        <input
          formControlName="username"
          type="text"
          class="w-full rounded-2xl border border-white/10 bg-slate-900/60 px-4 py-3 text-sm text-white outline-none transition focus:border-accent"
          placeholder="john_doe"
        />
      </label>

      <label class="block text-sm font-medium text-slate-200">
        <span class="mb-2 block text-xs uppercase tracking-wide text-slate-400">Email</span>
        <input
          formControlName="email"
          type="email"
          class="w-full rounded-2xl border border-white/10 bg-slate-900/60 px-4 py-3 text-sm text-white outline-none transition focus:border-accent"
          placeholder="john@example.com"
        />
      </label>

      <label class="block text-sm font-medium text-slate-200">
        <span class="mb-2 block text-xs uppercase tracking-wide text-slate-400">Nome</span>
        <input
          formControlName="name"
          type="text"
          class="w-full rounded-2xl border border-white/10 bg-slate-900/60 px-4 py-3 text-sm text-white outline-none transition focus:border-accent"
          placeholder="Mario"
        />
      </label>

      <label class="block text-sm font-medium text-slate-200">
        <span class="mb-2 block text-xs uppercase tracking-wide text-slate-400">Cognome</span>
        <input
          formControlName="lastName"
          type="text"
          class="w-full rounded-2xl border border-white/10 bg-slate-900/60 px-4 py-3 text-sm text-white outline-none transition focus:border-accent"
          placeholder="Rossi"
        />
      </label>

      <label class="block text-sm font-medium text-slate-200">
        <span class="mb-2 block text-xs uppercase tracking-wide text-slate-400">Password</span>
        <input
          formControlName="password"
          type="password"
          class="w-full rounded-2xl border border-white/10 bg-slate-900/60 px-4 py-3 text-sm text-white outline-none transition focus:border-accent"
          placeholder="Almeno 6 caratteri"
        />
      </label>

      <p *ngIf="error" class="rounded-2xl border border-red-500/40 bg-red-500/10 px-4 py-2 text-sm text-red-200">
        {{ error }}
      </p>

      <button type="submit" class="btn-primary w-full" [disabled]="loading || form.invalid">
        {{ loading ? 'Registrazione in corso...' : 'Registrati' }}
      </button>
    </form>

    <!-- MESSAGGIO POST-REGISTRAZIONE -->
   <!-- MESSAGGIO POST-REGISTRAZIONE -->
    <div *ngIf="mode === 'verify'" class="space-y-4 text-center">
      <p class="text-sm text-slate-300">
        Controlla la tua casella email.  
        Una volta verificato l’account potrai effettuare il login dalla pagina principale.
      </p>

      <p class="text-xs text-slate-400">
        Puoi chiudere questo riquadro.
      </p>
    </div>
  </div>
</div>
